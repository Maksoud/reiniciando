jQuery(document).ready(function(e){function t(e){var t=!1;e<0&&(t=!0),e=e.replace(/\D/g,"");var i=(e=new String(Number(e))).length;return 1==i?e=e.replace(/(\d)/,"0,000$1"):2==i?e=e.replace(/(\d)/,"0,00$1"):3==i?e=e.replace(/(\d)/,"0,0$1"):i>=4&&(e=e.replace(/(\d{4})$/,",$1")),t&&(e="-"+e),e}function n(e){var t=!1;-1!==e.search("-")&&(t=!0,console.log("Atenção: Valor negativo!")),e=e.replace(/\D/g,"");var i=(e=new String(Number(e))).length;return 1==i?e=e.replace(/(\d)/,"0.000$1"):2==i?e=e.replace(/(\d)/,"0.00$1"):3==i?e=e.replace(/(\d)/,"0.0$1"):i>=4&&(e=e.replace(/(\d{4})$/,".$1")),t&&(e="-"+e),e}var a=0;AddTableRow=function(){var i=document.querySelector("#products_id"),r=document.querySelector("#products_title"),l=document.querySelector("#edt_unity"),u=document.querySelector("#edt_quantity");if(""!=u.value?qtd=Number(n(u.value)).toFixed(4):qtd=0,""==i.value)return alert("Produto não identificado"),!1;if(""==r.value)return alert("Produto não informado"),!1;if(""==l.value)return alert("Unidade não informada"),!1;if(qtd<1e-4)return alert("Quantidade não informada"),!1;var d,o,c,s=e('<tr style="font-size: 11px;">');d='<td colspan="4" class="text-nowrap" style="vertical-align:middle !important;">\n                                <input type="hidden" name="ProductList['+a+'][products_id]" id="list_id_product" value="'+i.value+'">\n                                <input type="hidden" name="ProductList['+a+'][products_title]" id="list_product" value="'+r.value+'">\n                                &nbsp;'+i.value+" - "+r.value+"</td>",o='<td class="text-center" style="vertical-align:middle !important;">\n                                <input type="hidden" name="ProductList['+a+'][unity]" id="list_unity" value="'+l.value+'">\n                                &nbsp;'+l.value+"</td>",c='<td class="text-center" style="vertical-align:middle !important;">\n                                <input type="hidden" name="ProductList['+a+'][quantity]" id="list_quantity" value="'+String(qtd)+'">\n                                &nbsp;'+t(String(qtd))+"</td>",s.append(d+o+c+'<td class="text-center bg-gray media-middle" style="padding:12px;">\n                                <button onclick="EditTableRow(this)" type="button" class="btn btn-actions fa fa-pencil" title="Editar"></button>\n                                <button onclick="RemoveTableRow(this)" type="button" class="btn btn-actions fa fa-trash" title="Excluir"></button>\n                            </td>'),e("#products-table").append(s),a+=1,i.value="",r.value="",l.value="UN",u.value=""},EditTableRow=function(a){var r=document.querySelector("#products_id"),l=document.querySelector("#products_title"),u=document.querySelector("#edt_unity"),d=document.querySelector("#edt_quantity");d.value=Number(n(d.value)).toFixed(4);var o=e(a).closest("tr")[0].cells;for(i=0;i<o.length;i++){var c=o[i].getElementsByTagName("input");for(ii=0;ii<c.length;ii++)switch(c[ii].id){case"list_id_product":r.value=c[ii].value;break;case"list_product":l.value=String(c[ii].value);break;case"list_unity":u.value=String(c[ii].value);break;case"list_quantity":d.value=t(String(c[ii].value))}}RemoveTableRow(a)},RemoveTableRow=function(t){var i=e(t).closest("tr");return i[0].cells,i.fadeOut(350,function(){e(this).closest("tr").next().remove()}),!1}});