jQuery(document).ready(function(e){function t(e){var t=!1;e<0&&(t=!0),e=e.replace(/\D/g,"");var i=(e=new String(Number(e))).length;return 1==i?e=e.replace(/(\d)/,"0,000$1"):2==i?e=e.replace(/(\d)/,"0,00$1"):3==i?e=e.replace(/(\d)/,"0,0$1"):i>=4&&(e=e.replace(/(\d{4})$/,",$1")),t&&(e="-"+e),e}function a(e){var t=!1;-1!==e.search("-")&&(t=!0,console.log("Atenção: Valor negativo!")),e=e.replace(/\D/g,"");var i=(e=new String(Number(e))).length;return 1==i?e=e.replace(/(\d)/,"0.000$1"):2==i?e=e.replace(/(\d)/,"0.00$1"):3==i?e=e.replace(/(\d)/,"0.0$1"):i>=4&&(e=e.replace(/(\d{4})$/,".$1")),t&&(e="-"+e),e}var l=0;AddTableRow=function(){var i=document.querySelector("#products_id"),n=document.querySelector("#products_title"),d=document.querySelector("#edt_unity"),r=document.querySelector("#edt_quantity"),u=document.querySelector("#edt_deadline");if(""!=r.value?qtd=Number(a(r.value)).toFixed(4):qtd=0,""==i.value)return alert("Produto não identificado"),!1;if(""==n.value)return alert("Produto não informado"),!1;if(""==d.value)return alert("Unidade não informada"),!1;if(qtd<1e-4)return alert("Quantidade não informada"),!1;""==u.value?(deadline_value="-",new_deadline=null):(deadline_value=u.value,split=u.value.split("/"),new_deadline=split[2]+"-"+split[1]+"-"+split[0]);var o,c,s,v=e('<tr style="font-size: 11px;">');o='<td colspan="4" class="text-nowrap" style="vertical-align:middle !important;">\n  <input type="hidden" name="ProductList['+l+'][products_id]" id="list_id_product" value="'+i.value+'">\n  <input type="hidden" name="ProductList['+l+'][products_title]" id="list_product" value="'+n.value+'">\n  &nbsp;'+i.value+" - "+n.value+"</td>",c='<td class="text-center" style="vertical-align:middle !important;">\n  <input type="hidden" name="ProductList['+l+'][unity]" id="list_unity" value="'+d.value+'">\n  &nbsp;'+d.value+"</td>",s='<td class="text-center" style="vertical-align:middle !important;">\n  <input type="hidden" name="ProductList['+l+'][quantity]" id="list_quantity" value="'+String(qtd)+'">\n  &nbsp;'+t(String(qtd))+"</td>",list_deadline='<td class="text-center" style="vertical-align:middle !important;">\n  <input type="hidden" name="ProductList['+l+'][deadline]" id="list_deadline" value="'+new_deadline+'">\n  &nbsp;'+deadline_value+"</td>",v.append(o+c+s+list_deadline+'<td class="text-center bg-gray media-middle" style="padding:12px;">\n  <button onclick="EditTableRow(this)" type="button" class="btn btn-actions fa fa-pencil" title="Editar"></button>\n  <button onclick="RemoveTableRow(this)" type="button" class="btn btn-actions fa fa-trash" title="Excluir"></button>\n </td>'),e("#products-table").append(v),l+=1,i.value="",n.value="",d.value="UN",r.value="",u.value=""},EditTableRow=function(l){var n=document.querySelector("#products_id"),d=document.querySelector("#products_title"),r=document.querySelector("#edt_unity"),u=document.querySelector("#edt_quantity"),o=document.querySelector("#edt_deadline");u.value=Number(a(u.value)).toFixed(4);var c=e(l).closest("tr")[0].cells;for(i=0;i<c.length;i++){var s=c[i].getElementsByTagName("input");for(ii=0;ii<s.length;ii++)switch(s[ii].id){case"list_id_product":n.value=s[ii].value;break;case"list_product":d.value=String(s[ii].value);break;case"list_unity":r.value=String(s[ii].value);break;case"list_quantity":u.value=t(String(s[ii].value));break;case"list_deadline":o.value=s[ii].value}}RemoveTableRow(l)},RemoveTableRow=function(t){var i=e(t).closest("tr");return i[0].cells,i.fadeOut(350,function(){e(this).closest("tr").next().remove()}),!1}});