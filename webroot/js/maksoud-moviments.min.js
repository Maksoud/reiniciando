jQuery(document).ready(function(a){function e(a){a=a.replace(/\D/g,"");var e=(a=new String(Number(a))).length;return 1==e?a=a.replace(/(\d)/,"0,0$1"):2==e?a=a.replace(/(\d)/,"0,$1"):e>2&&e<=5?a=a.replace(/(\d{2})$/,",$1"):e>5&&(a=a.replace(/(\d{2})$/,",$1").replace(/\d(?=(?:\d{3})+(?:\D|$))/g,"$&.")),a}function t(a){a=a.replace(/\D/g,"");var e=(a=new String(Number(a))).length;return 1==e?a=a.replace(/(\d)/,"0.0$1"):2==e?a=a.replace(/(\d)/,"0.$1"):e>2&&(a=a.replace(/(\d{2})$/,".$1")),a}function r(){var r,l,o,n,i;a(".dataLoading").html(""),r=Number(t(a("#valor").html())),l=Number(t(a("#valorbaixa").val())),o=a("#vlrmesclado").html(),parcial=a("#vlrparcial").html(),"P"!==a("input[name='parcial']:checked").val()?(r>l?a("#text-vlrdesc").html("Desconto Aplicado: "):r<l?a("#text-vlrdesc").html("Juros Aplicado: "):r===l&&a("#text-vlrdesc").html("Desconto/Juros Aplicado: "),n=(n=l-r).toFixed(2),a("#vlrdesc").html(e(String(n)))):r>l?(a("#text-vlrdesc").html("Valor da nova fatura parcial: "),n=(n=l-r).toFixed(2),a("#vlrdesc").html(e(String(n)))):r<l?a("#text-vlrdesc").html("O valor da baixa parcial não poderá ser maior"):r===l&&a("#text-vlrdesc").html("Aguardando o valor da baixa parcial"),o&&(o=Number(t(o)),a("#mesclapgto").html(e(String(o))),i=(i=o-r).toFixed(2),r===o||parcial||(a("#text-diferenca").html("Valor em Desacordo com a Fatura: "),a("#vlrdiferenca").html(e(String(i))))),delete r,delete l,delete o,delete n,delete i}a("#informarPagamento").on("click",function(){var e=a("#collapsePagamento").is(":visible"),t=a("#collapsePagamento").is(":hidden");a("#collapseCard").is(":hidden")&&(t?(a("#informarCard").attr("disabled","disabled"),a("#informarCard").removeAttr("href")):e&&(a("#informarCard").removeAttr("disabled"),a("#informarCard").attr("href","#collapseCard")))}),a("#informarCard").on("click",function(){var e=a("#collapseCard").is(":visible"),t=a("#collapseCard").is(":hidden"),r=a("#cprCardsForm").attr("action");a("#collapsePagamento").is(":hidden")&&(t?(r=(r=r.replace("moviments","moviment-cards")).replace("add?titulo=Nova+Conta+a+Pagar%2FReceber","add?titulo=Novo+Movimento+de+Cart%C3%A3o"),a("#cprCardsForm").attr("action",r),a("#modal_item_title").html("Novo Movimento de Cartão"),a("input[name='vencimento']").val(""),a("#document_types_id").val(""),a("#document_types_title").val("CARTÃO"),a("#document_types_title").attr("disabled","disabled"),a("#document_types_add").attr("disabled","disabled"),a("#document_types_add").removeClass("btn_modal2"),a("input[name='vencimento']").attr("disabled","disabled"),a("#informarPagamento").attr("disabled","disabled"),a("#informarPagamento").removeAttr("href"),a("#collapsePagamento").removeClass("in"),a("input[name='historico']").attr("name","title")):e&&(r=(r=r.replace("moviment-cards","moviments")).replace("add?titulo=Novo+Movimento+de+Cart%C3%A3o","add?titulo=Nova+Conta+a+Pagar%2FReceber"),a("#cprCardsForm").attr("action",r),a("#modal_item_title").html("Nova Conta a Pagar/Receber"),a("input[name='vencimento']").val(""),a("#document_types_title").val(""),a("#cards_title").val(""),a("#cards_id").val(""),a("#document_types_title").removeAttr("disabled"),a("#document_types_add").removeAttr("disabled"),a("#document_types_add").addClass("btn_modal2"),a("input[name='vencimento']").removeAttr("disabled"),a("#informarPagamento").removeAttr("disabled"),a("#informarPagamento").attr("href","#collapsePagamento"),a("input[name='title']").attr("name","historico")))}),a("input[name='parcelas']").on("change",function(){console.log(a("input[name='parcelas']").val()),1!=a("input[name='parcelas']").val()?(a("#informarPagamento").attr("disabled","disabled"),a("#collapsePagamento").removeClass("in"),a("#informarPagamento").removeAttr("data-toggle")):(a("#informarPagamento").removeAttr("disabled"),a("#informarPagamento").attr("data-toggle","collapse"))}),a("#informarPagamento").on("click",function(){var e=a("#collapsePagamento").is(":visible");a("#collapsePagamento").is(":hidden")?(a("input[name='vencimento']").val()?a("input[name='dtbaixa']").val(a("input[name='vencimento']").val()):a("input[name='dtbaixa']").val(a("input[name='data']").val()),a("input[name='valorbaixa']").val(a("#valor").val())):e&&(a("input[name='dtbaixa']").val(""),a("input[name='valorbaixa']").val(""))}),a("input[name='valorbaixa']").on("keydown",function(){a(".dataLoading").html("<i class='fa fa-spinner fa-pulse fa-3x fa-fw' style='font-size:18px;'></i>")}),a("input[name='valorbaixa']").bind("focusout",r),a("input[name='parcial']").on("click",r)});